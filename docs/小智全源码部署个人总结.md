# 编译小智，烧录到硬件

> 参考[Windows搭建 ESP IDF 5.5.1开发环境以及编译小智 - 飞书云文档](https://icnynnzcwou8.feishu.cn/wiki/JEYDwTTALi5s2zkGlFGcDiRknXf)

#### 下载安装esp-idf

注意：

- 安装过程中，会执行命令`Running command: D:\soft\esp_idf\ins\Espressif\tools\idf-git\2.44.0\cmd\git.exe -C D:\soft\esp_idf\ins\Espressif\frameworks\esp-idf-v5.4.2 submodule foreach --recursive git config --local core.fileMode false`时，进度条可能会卡住，等会就行。
- 安装完成后，桌面会出现esp-idf的终端快捷方式。

#### 编译小智硬件端代码

- 下载硬件代码：执行命令`git clone ``https://github.com/78/xiaozhi-esp32` 。
- 打开桌面的esp-idf的终端。
- 在终端执行`cd D:\WorkSpace\jint\xiaozhi-esp32` ，切换到刚下载到硬件代码目录。
- 设置芯片类型：在终端执行`idf.py set-target esp32s3` 。

- 在终端继续输入 `idf.py menuconfig` , 此时会打开图形化界面。
	- 在图形化界面，进入Xiaozhi Assistant选项。
	- 修改OTA地址 。（可选）
	- 修改 Board Type。（取决于你的硬件类型，我这里选“面包板+Wifi+LED”）。
	- 修改LED类型。（可选，我这里选了128x128）。
	- 按键盘S键保存，而后ESC退出图形化界面。
- 编译硬件代码：执行 `idf.py build` 。
- 将硬件设备连接线到电脑上，准备烧录。
- 执行`idf.py build flash monitor` 命令将进行烧录，并在完成后显示硬件的运行日志。

# 运行manage-api服务

按照文档 [xiaozhi-esp32-server/docs/Deployment_all.md at main · xinnan-tech/xiaozhi-esp32-server](https://github.com/xinnan-tech/xiaozhi-esp32-server/blob/main/docs/Deployment_all.md#方式二本地源码运行全模块) 依序操作即可。





